<?xml version="1.0"?>
<!DOCTYPE concept PUBLIC "-//OASIS//DTD DITA Concept//EN" "concept.dtd">
<!-- Created with XMetaL (http://www.xmetal.com) -->
<concept id="c_psdk_ref_dvr-ad-insertion-preroll-ads"> 
  <title>DVR with ad insertion and pre-roll support</title> 
  <shortdesc>You can set the policy for pre-roll ad playback in the reference
	 player. 
  </shortdesc> 
  <conbody> 
	 <p>The KEEP policy states that the pre-roll ad will be inserted into the
		playback window and remain in the stream during the entire playback experience.
		If the user seeks back into the playback window, they will see the same
		pre-roll ad again. 
	 </p> 
	 <p>The REMOVE policy states that the pre-roll ad will be removed from the
		window after it has played or when the user seeks to a point past the ad. The
		default behavior for the 
		<ph
		 conref="file:///C:/Users/paraki/Perforce/theoden_1666/primetime/users/documentation/XML/phrase_library.xml#c_psdk_phrase-library/psdk_platform">Android</ph>
		reference implementation is REMOVE. 
	 </p> 
	 <p>The policy is set in the CustomAdBreakPolicySelector class. 
	 </p> 
	 <codeblock outputclass="syntax java" platform="android">public class CustomAdBreakPolicySelector implements AdBreakPolicySelector {
    private MediaPlayerItem _mediaPlayerItem;
    public CustomAdBreakPolicySelector(MediaPlayerItem _mediaPlayerItem) {
        this._mediaPlayerItem = _mediaPlayerItem;
 
    }
    @Override
    public AdBreakPolicy selectPolicyFor(AdBreak adBreak, PlacementInformation placementInformation) {
        if (placementInformation.getType().equals(PlacementInformation.Type.PRE_ROLL) &amp;&amp; _mediaPlayerItem.isLive())
 {
            return AdBreakPolicy.REMOVE;
        }
        return AdBreakPolicy.KEEP;
    }
}</codeblock> 
	 <codeblock platform="dhls"><draft-comment>Need code sample for Desktop.  There is no CustomAdBreakPolicySelector class for Desktop.</draft-comment></codeblock>
  </conbody> 
</concept> 
