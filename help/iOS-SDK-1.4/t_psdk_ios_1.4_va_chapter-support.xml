<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE task PUBLIC "-//OASIS//DTD DITA Task//EN" "task.dtd">
<task id="t_psdk_va_chapter-support"> 
  <title>Implement chapter support</title> 
  <shortdesc/> 
  <taskbody> 
	 <context id="context_ED6506B5BE3D413C9CEA6BC89DC477EE"> 
		<p>You can define and track chapters for video tracking in a 
		  <ph conkeyref="phrases/primetime-sdk-name"/>-based application in the
		  following ways: 
		<ul id="ul_980F5661A5C84F4BAE6E12E315D3B3C8"> 
		  <li id="li_6EAA7DB612E243EA84376926DE34A62B">Default chapters, which
			 are managed internally by 
			 <ph conkeyref="phrases/primetime-sdk-name"/>. 
			 <p>A chapter is defined as the time between each ad break. For
				example, the time between a pre-roll ad break and the first mid-roll is defined
				as the first chapter. 
			 </p> 
		  </li> 
		  <li id="li_17ACFB2EDE834D398EEB5C8956D7BABF">Custom chapters, which are
			 managed by the application and are based on CMS data or another way that the
			 application uses to define chapters. 
		  </li> 
		</ul> 
		</p> 
	 </context> 
	 <steps id="steps_205AE03EDE6646378DD8647732504111"> 
		<step id="step_BD7419B3A2BC4D8F8EBB7B19B4F86F6C"> 
		  <cmd>Define and track default or custom chapters.
		  </cmd> 
		  <info> 
			 <codeblock  outputclass="syntax objective-c">// First, enable chapter tracking by setting the boolean 'enableChapterTracking' to true:

    vaTrackingMetadata.enableChapterTracking = YES;
 
// For custom chapter definitions, provide an array of chapters through the metadata: 
// For example, 3 chapters of 60 second duration each:

    NSMutableArray *chapters = [[[NSMutableArray alloc] init] autorelease];
     
    int chapterDuration = 60;
    for (int i = 0; i &lt; 3; i++)
    {
        PTVideoAnalyticsChapterData *chapterData = 
          [[[PTVideoAnalyticsChapterData alloc] init] autorelease];
        chapterData.name = [NSString stringWithFormat:@"chapter_%d", (i+1)];
        chapterData.range = 
          CMTimeRangeMake(CMTimeMakeWithSeconds(i * chapterDuration, 10000), 
          CMTimeMakeWithSeconds(chapterDuration, 10000));
         
        [chapters addObject:chapterData];
    }
     
    vaTrackingMetadata.chapters = chapters;
 
// For default chapters, the application must not set custom chapters on the tracking metadata 
// and simply enable chapters to be tracked by setting the boolean value as defined above.</codeblock> 
		  </info> 
		</step> 
	 </steps> 
  </taskbody> 
</task> 
