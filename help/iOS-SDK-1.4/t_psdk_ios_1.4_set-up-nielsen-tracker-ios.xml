<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE task PUBLIC "-//OASIS//DTD DITA Task//EN" "task.dtd">
<task id="t_psdk_set-up-nielsen-tracker-ios">
	<title>Integrate the Nielsen Analytics module</title>
	<shortdesc> The Nielsen Analytics module requires a specific set of metadata configured for your
		implementation. Once the metadata is loaded, you attach the module to your MediaPlayer and
		communicate with it using <ph conref="phrase_library_ios.xml#c_psdk_phrase-library/primetime-sdk-name"><?xm-replace_text Phrase?></ph> APIs. </shortdesc>
	<taskbody>
		<context id="context_2B6CEE71B276442289FBEB3A24BD9375">
			<p>The Nielsen Tracker instance expects tracking metadata to be set through a
					<codeph>TrackingMetadata</codeph> class.  This example demonstrates the new and
				updated PDSK APIs described in "<i><ph conref="phrase_library_ios.xml#c_psdk_phrase-library/primetime-sdk-name"><?xm-replace_text Phrase?></ph> APIs for Nielsen Analytics</i>") to set up
				the required metadata: </p>
		</context>
		<steps id="steps_ymy_twz_zp">
			<step>
				<cmd>Create a Tracker Instance with every player item (values shown in the sample
					below are for demonstration purposes only). </cmd>
				<info>
					<codeblock outputclass="syntax objective-c">self.nielsenTracker = [[PTNielsenTracker alloc] initWithAppInfo:[self getNielsenAppInfo]];
[self.nielsenTracker attachMediaPlayer:self.player];
 
- (NSDictionary *)getNielsenAppInfo {
  return @{
    @"appid": @"C8CFD744-1C79-4F77-A014-B73B6552E37B",
    @"appversion": [PTSDK apiVersion], // this must be your specific app version
    @"appname": [[[NSBundle mainBundle] infoDictionary] 
      objectForKey:@"CFBundleName"], // this must be your specific app name
    @"sfcode": @"aws",
    @"dma": @"123",
    @"ccode": @"456"
  };
}</codeblock>
				</info>
			</step>
			<step>
				<cmd>Create a <codeph>PTNielsenTrackingMetadata</codeph> instance.</cmd>
				<info>
					<codeblock outputclass="syntax objective-c">- (PTNielsenTrackingMetadata *)getNielsenTrackingMetadata
{
    PTNielsenTrackingMetadata *metadata = [[[PTNielsenTrackingMetadata alloc] init] autorelease];
     metadata.appInfo = @{
         @"appid": @"C8CFD744-1C79-4F77-A014-B73B6552E37B",
         @"appversion": [PTSDK apiVersion],
         @"appname": [[[NSBundle mainBundle] infoDictionary] objectForKey:@"CFBundleName"],
         @"sfcode": @"aws",
         @"dma": @"123",
         @"ccode": @"456"
    };
     
    metadata.channelInfo = @{
        @"channelName": [NSString stringWithString:_itemUrl],
        @"adModel": @"2",
        @"dataSrc": @"id3"
    };
     
    metadata.metadataInfo = @{
        @"type": @"content",
        @"assetid": self.parent.adsTab.defaultMediaId,
        @"tv": @YES,
        @"program": @"MyProgram",
        @"title": @"MyEpisodeTitle",
        @"category": @"testcat",
        @"adModel": @"2",
        @"dataSrc": @"id3"
    };
     
    return metadata;
} </codeblock>
				</info>
			</step>
			<step>
				<cmd>Add Nielsen Tracking Metadata to <codeph>PTMetdata</codeph> instance.</cmd>
				<info>
					<codeblock outputclass="syntax objective-c">PTMetadata *metadata = [[PTMetadata alloc] init];
[metadata setMetadata:[self getNielsenTrackingMetadata] forKey:PTNielsenTrackingMetadataKey];</codeblock>
				</info>
			</step>
		</steps>
	</taskbody>
</task> 
