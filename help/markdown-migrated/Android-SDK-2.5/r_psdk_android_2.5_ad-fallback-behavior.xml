<?xml version="1.0"?>
<!DOCTYPE reference PUBLIC "-//OASIS//DTD DITA Reference//EN" "reference.dtd">
<reference id="ad-fallback-vast-vmap"> 
  <title>Ad fallback behavior for VAST and VMAP</title> 
  <shortdesc>When 
	 <ph conkeyref="phrases/auditude-name"/> encounters a VAST ad (creative)
	 that is empty or that has a media type that is invalid for HLS, it evaluates
	 the fallback ads to determine what to return. 
  </shortdesc> 
  <refbody> 
	 <section id="section_9F60AF00CE9645848EAAF8C06A9E426B"> 
		<p>In <ph conkeyref="phrases/primetime-sdk-name"/>, the only valid media type is 
		  <codeph>application/x-mpegURL</codeph> (M3U8).
		</p> 
		<p>When there are stand-alone fallback ads, the 
		  <ph conkeyref="phrases/auditude-name"/> plug-in examines these ads in
		  the following order and returns the first ad with a valid media type: 
		<ol id="ol_CAA1FFF3AA464BDD9A9856AC8A37A4E9"> 
		  <li id="li_6E32AD35B3794A9B81DB09B648CFE71F">If repackaging is enabled,
			 the first occurrence of an ad with an invalid media type is treated like other
			 invalid media types. 
			 <p>If repackaging fails, this process applies to additional
				occurrences of the ad. 
			 </p> 
		  </li> 
		  <li id="li_B2758EA2292B4556A7314B82BBB7CB44">If <ph conkeyref="phrases/primetime-sdk-name"/> finds no valid
			 fallback ads, it returns the original ad with the invalid media type. 
		  </li> 
		  <li id="li_A354DF4E6DF94B5596C8D23F91834960">If a fallback ad with a
			 valid MIME type is returned instead of the original ad, 
			 <ph conkeyref="phrases/auditude-name"/> sends error code 403 to the
			 VAST error URL, if available. 
		  </li> 
		  <li id="li_F2C6377717EA4596A041A1A0F2C842C7">If a fallback ad is a
			 wrapper and returns multiple ads, only ads with the correct media type are
			 returned. 
		  </li> 
		</ol> 
		<note type="important">This behavior is always enabled for ads in VAST
		  wrappers. For VAST ads inline in a VMAP, the behavior is disabled by default,
		  but your application can enable it. 
		</note> 
		</p> 
	 </section> 
  </refbody> 
</reference> 
