<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE concept PUBLIC "-//OASIS//DTD DITA Concept//EN" "concept.dtd">
<concept id="c_psdk_ad-deletion-replacement-api-changes-ios"> 
  <title>Ad deletion and replacement API changes</title> 
  <shortdesc>The following changes in 
	 <ph
	  conkeyref="phrases/primetime-sdk-name"><?xm-replace_text Phrase?></ph>
	 support ad deletion and replacement. 
  </shortdesc> 
  <conbody> 
	 <p><b>New APIs</b> 
	 </p> 
	 <ul id="ul_t51_l1w_tp"> 
		<li id="li_F4D939588EBB4BB6BFBA797D0975F02C"><codeph>PTTimeRangeCollection</codeph> is a public
				class that defines a predefined set of ranges and a type: <ul id="ul_bqx_fbw_tp">
					<li id="li_86BC6F6CF1E34077843084BA7D17F476"><codeph>property
							PTTimeRangeCollectionType type</codeph> indicates the type of time
						range. </li>
					<li id="li_AE7C5147D0974741A240517750E6619E"><codeph>property NSArray*
							ranges</codeph> is used to set the time ranges. <p>The expected type of
							objects in the array are <codeph>PTReplacementTimeRange</codeph> or
								<codeph>CMTimeRange</codeph>. </p>
						<note type="tip">All the objects of the array must be the same type. </note>
					</li>
					<li id="li_5EAEDBE97404433683637F495ACEF7C6"
							><codeph>PTTimeRangeCollectionType</codeph> is an enum that defines the
						behavior for the ranges that are defined in the
							<codeph>PTTimeRangeCollection</codeph>: <ul id="ul_ycg_lfw_tp">
							<li id="li_DA879F64D71D479AA4F279FECCADF0CE"
									><codeph>PTTimeRangeCollectionTypeMarkRanges</codeph>: The type
								of the ranges is <i>Mark</i>. The ranges are used for marking the
								ranges in the content as Ads. </li>
							<li id="li_9C4DEDB5D5C242D9827C2D14332698B7"
									><codeph>PTTimeRangeCollectionTypeDeleteRanges</codeph>: The
								type of the ranges is Delete. The defined ranges are removed from
								the main content before ad insertion. </li>
							<li id="li_0724D8AC81E04D93BA61C092FA870850"
									><codeph>PTTimeRangeCollectionTypeReplaceRanges</codeph>: The
								type of the ranges is Replace. The defined ranges are replaced from
								the main with Ads (Ad signaling mode is set to
									<codeph>PTAdSignalingModeCustomTimeRanges</codeph>). </li>
						</ul></li>
				</ul></li> 
		<li id="li_6F9CECE0F075472E9FB925867D2122E9"><codeph>PTReplacementTimeRange</codeph> - New public
				class that defines a single range of the <codeph>PTTimeRangeCollection</codeph>: <ul
					id="ul_qbj_tgw_tp">
					<li id="li_F39088D5F1A54EC6B62FFC59A8098A91"><codeph>property CMTimeRange
							range</codeph> - Defines the start and duration of the range. </li>
					<li id="li_D4051B6C45A24FD5826EFD618691504C"><codeph>property long
							replacementDuration</codeph> - If the type of the
							<codeph>TimeRangeCollection</codeph> is
							<codeph>PTTimeRangeCollectionTypeReplaceRanges</codeph>, the
							<codeph>replacementDuration</codeph> is used to create a placement
						opportunity (ad insertion) with a duration of
							<codeph>replacementDuration</codeph>. If the
							<codeph>replacementDuration</codeph> is not set, the ad server will
						determine the duration and number of ads for that placement opportunity.
					</li>
				</ul></li> 
		<li id="li_86A0A7FA71D14FE3BA43502742C4CF2E"><codeph>PTAdSignalingMode</codeph>: <ul
					id="ul_dzb_2hw_tp">
					<li id="li_5193FC189BFF4814B40BE031F639DD11"
							><codeph>PTAdSignalingModeCustomTimeRanges</codeph> - Added a new type
						of <codeph>PTAdSignalingMode</codeph>. This mode is used in conjunction with
						the <codeph>PTTimeRangeCollection</codeph> with type
							<codeph>PTTimeRangeCollectionReplace</codeph> for ad insertion based on
						the replacement ranges. </li>
				</ul></li> 
		<li id="li_B92CA5978563409BBAB0DD77BD47435D"><codeph>PTAdMetadata</codeph>: <ul id="ul_ofv_zhw_tp">
					<li id="li_45EB49F2FEC445A1ACAC0E649ACAF339"><codeph>property
							PTTimeRangeCollection* timeRangeCollection</codeph> - For setting the
						time ranges used in the mark/delete/replace ranges in the playback content.
					</li>
				</ul></li> 
		<li id="li_B564514924AA41FA852F0B4F76EC82DC">Warning logs: 
		  <ul id="ul_un4_g3w_tp"> 
			 <li id="li_4A5031F7AD994D32B299A71C8962FCC2"><codeph>UNDEFINED_TIME_RANGES</codeph>
						<ul id="ul_r5l_h3w_tp">
							<li id="li_1818DCE91ACC4C36B595F2189290D0BD">Type - Warning </li>
							<li id="li_26AEEF6364644A369C16AEC995E8BAFD">Description - The ad
								signaling mode is defined as custom ranges but the custom ranges are
								not defined. </li>
						</ul></li> 
			 <li id="li_4AAE8EC95A944617B1A26C5BFA8637C8"><codeph>INVALID_TIME_RANGES</codeph>
						<ul id="ul_ols_p3w_tp">
							<li id="li_310F2527B56A4FC882DD37E6CD5258C5">Type - Warning </li>
							<li id="li_0A4638D7F4F04F519D0A732C2E57B823">Description - One or more
								time ranges are invalid and will be ignored or modified.  </li>
						</ul></li> 
		  </ul> 
		</li> 
	 </ul> 
	 <p><b>Deprecated APIs</b> 
	 </p> 
	 <ul id="ul_nvn_w3w_tp"> 
		<li id="li_743DAAA83A6843E29A158DB8225EDB61"><codeph>PTAdMetadata 
		  </codeph>:
		  <ul id="ul_fm4_x3w_tp"> 
			 <li id="li_A3F7A730BA1542EE9415DAEDECEFF737"><codeph>property
				  NSArray* externalAdRanges</codeph> - This property was previously used to
				define C3 ranges for marking. It is now deprecated, as these ranges are set via
				
				<codeph>PTTimeRangeCollection</codeph>. 
			 </li> 
		  </ul> 
		</li> 
	 </ul> 
  </conbody> 
</concept> 
