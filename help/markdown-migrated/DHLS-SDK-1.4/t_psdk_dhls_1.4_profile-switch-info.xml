<?xml version="1.0"?>
<!DOCTYPE task PUBLIC "-//OASIS//DTD DITA Task//EN" "task.dtd">
<task id="task_profile_switch_info"> 
  <title>Get information about profile switch </title> 
  <shortdesc>When the media player switches its current profile to a new
	 profile, you can retrieve information about the switch, including when it
	 switched, width and height information, or why a different bit rate was used. 
  </shortdesc> 
  <taskbody> 
	 <steps id="steps_8735EE0B73E740B384F50E1A1699C784"> 
		<step id="step_079E6568099E41C0926CCC6449691192">
				<cmd>Listen for the <codeph>ProfileEvent.PROFILE_CHANGED</codeph> event. </cmd>
				<info>The <ph
						conkeyref="phrases/primetime-sdk-name"
						><?xm-replace_text Phrase?></ph> media player dispatches this event when its
					adaptive bit rate switching algorithm switches to another profile because of
					network or machine conditions. (When the bit rate or the period changes.)
				</info>
			</step> 
		<step id="step_31CDB32C2E4441C9B0F40C9E21A9758A"> 
		  <cmd>When the event occurs, check the following properties for
			 information about the switch: 
		  </cmd> 
		  <info> 
			 <ul id="ul_2D4A502973DD49FCBA13CD396AC1BDC8"> 
				<li
				 id="li_C712AE4F3A984302ABD38B2961B82D5F"><codeph>profile</codeph>: Identifier
				  for the new profile being used. 
				</li> 
				<li id="li_71E3FC1DC6194399ACD2BD6EC7796760"><codeph>time</codeph>:
				  The stream time at which the switch occurred. 
				</li> 
				<li id="li_67AA732A2B1D470AB493F9EE4609CD22"><codeph>description</codeph>: Textual description
							of the reason for a bit rate change, as a string of semicolon-separated
							key/value pairs. Includes a maximum of one <codeph>Reason</codeph> and
							one <codeph>Bitrate</codeph>. If the information is not available or the
							bit rate did not change, this string is empty.  <table
								id="table_E400FD9C57FF40CBAC14AF6847CD8301">
								<tgroup cols="2">
									<colspec colnum="1" colname="col1" colwidth="1.00*"/>
									<colspec colnum="2" colname="col2" colwidth="3.98*"/>
									<thead>
										<row>
											<entry colname="col1">Key name </entry>
											<entry colname="col2">Possible values </entry>
										</row>
									</thead>
									<tbody>
										<row>
											<entry colname="col1"><codeph>Reason</codeph>
											</entry>
											<entry colname="col2">
												<ul id="ul_37DDE3F297634ED6B47DF5D73F969369">
												<li id="li_E374B029E1AF40689D70A9D30E057C5B"
												>Network Adaptation </li>
												<li id="li_753862EEF1C9474EA8E20C89F5EF5D8D">Seek </li>
												<li id="li_EC14923F92CF4D11A47928A8D2DE6D8B"
												>Profile Not Supported </li>
												<li id="li_695AB4A89C9D4833AF6D8B6424FC912B"
												>Failover </li>
												</ul>
											</entry>
										</row>
										<row>
											<entry colname="col1"><codeph>Bitrate</codeph>
											</entry>
											<entry colname="col2">
												<ul id="ul_1B49BD90A91147359712E1AFD8877E23">
												<li id="li_1C8E593C65D34742B14A8D0EAD43E0A9"
												><codeph>up</codeph>: The bit rate increased </li>
												<li id="li_B1A00E3985A849B6855E15CF70D79BB8"
												><codeph>down</codeph>: The bit rate decreased
												</li>
												</ul>
											</entry>
										</row>
									</tbody>
								</tgroup>
							</table> Here are some examples of returned <codeph>description</codeph>
							strings:
							<codeblock>"Bitrate::=up;Reason::=Network Adaptation;"

"Bitrate::=down;Reason::=Failover;"</codeblock>
						</li> 
				<li
				id="li_284F976DEA0645F2BE66EAB57D946CE9"><codeph>width</codeph>: Integer
				  indicating width in pixels. 
				</li> 
				<li
				id="li_28A7C3E4381C44AAB878E1AC7CEDAA19"><codeph>height</codeph>: Integer
				  indicating height in pixels. 
				</li> 
			 </ul> 
			 <note>Width and height data are only available when they are included
				in the 
				<codeph>RESOLUTION</codeph> tag in the M3U8 manifest. If the
				information is not included in the M3U8, the width and height properties are
				set to 0, as they are not part of the profile information. 
			 </note> 
		  </info> 
		</step> 
	 </steps> 
	 <example id="example_A713D420AE2E4E3CB7B78C6BC732BE90">For example:
			<codeblock outputclass="syntax actionscript">_player.addEventListener(ProfileEvent.PROFILE_CHANGED, onProfileChange);
private function onProfileChange(event:ProfileEvent):void {
    _logger.info("#onProfileChange Current profile/bitrate has changed. 
      {0} for reason {1} of resolution [ {2} , {3} ]", 
      event.profile, event.description, event.width, event.height);
}</codeblock>
		</example> 
  </taskbody> 
</task> 
