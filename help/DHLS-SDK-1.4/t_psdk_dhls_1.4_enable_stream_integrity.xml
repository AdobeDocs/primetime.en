<?xml version="1.0"?>
<!DOCTYPE task PUBLIC "-//OASIS//DTD DITA Task//EN" "task.dtd">
<task id="enable-stream-integrity"> 
  <title>Enable stream integrity</title> 
  <shortdesc>By enabling stream integrity, you can prevent ad-blocking software
	 from blocking ads. 
  </shortdesc> 
  <taskbody> 
	 <steps id="steps_1D53A089AD5B4E768BD92CDD11B00FBB"> 
		<step id="step_65126B10054F47D0AD9310647D01D5BB"> 
		  <cmd>Set the 
			 <codeph>NetworkConfiguration.forceNativeNetworking</codeph> property
			 to 
			 <codeph>true</codeph>. 
		  </cmd> 
		  <info> 
			 <codeblock outputclass="syntax actionscript">var networkConfiguration:NetworkConfiguration =  
      new NetworkConfiguration();
networkConfiguration.forceNativeNetworking = true;</codeblock>
			 <p>Remember the following: 
			 <ul id="ul_FE1D4A688E8941EAB967AD47C33BB999"> 
				<li id="li_53F2797CC7B8418B98C40082A1B3B276">When this property is
				  set to 
				  <codeph>true</codeph>, 
				  <ph conkeyref="phrases/primetime-sdk-name"/> sends ad requests
				  through the native networking stack and avoiding ad blockers. 
				</li> 
				<li id="li_F1EF541EBA504818A30C2230C0CF9505">When this property is
				  set to 
				  <codeph>false</codeph>, ad requests proceed through the browser's
				  network stack as usual. The default is 
				  <codeph>false</codeph>. 
				</li> 
			 </ul>
			 </p> 
		  </info> 
		</step> 
		<step id="step_7D86FCE9FC8F45D2B4B2938CDE941616">
				<cmd> If your application needs to send cookie headers with requests, and stream
					integrity is enabled, set the header to use the
						<codeph>NetworkConfiguration.cookieHeaders</codeph> property. </cmd>
				<info>
					<note type="important">When stream integrity is enabled, <ph
							conkeyref="phrases/primetime-sdk-name"/> might not have access to
						cookies that are set in the browser. If your application needs cookies,
						complete this step to provide the cookie headers to <ph
							conkeyref="phrases/primetime-sdk-name"/>. </note>
				</info>
			</step> 
		<step id="step_ADD2F64F8C8C4117B5F1490F1C2EC538">
				<cmd>Set your <codeph>NetworkConfiguration</codeph> as metadata. </cmd>
				<stepxmp>
					<codeblock outputclass="syntax actionscript">var resourceMetadata:Metadata = new Metadata();
resourceMetadata.setMetadata( 
    DefaultMetadataKeys.NETWORK_CONFIGURATION_KEY, 
    networkConfiguration);</codeblock>
				</stepxmp>
			</step> 
		<step id="step_5F898BB2FDE64114BE1D16B7F4DEFF31">
				<cmd>Provide your metadata when you create a <codeph>MediaResource</codeph>. </cmd>
				<info>
					<p>For example, if you use <codeph>createFromURL</codeph>:
						<codeblock outputclass="syntax actionscript">var resource:MediaResource = MediaResource.createFromURL(url, resourceMetadata);</codeblock>
					</p>
					<p>This is needed because <codeph>NetworkConfiguration</codeph> is part of the
						metadata that is loaded in <codeph>MediaResource</codeph>. After you call
							<codeph>replaceCurrentResource(MediaResource,
							MediaPlayerItemConfig)</codeph>, the
							<codeph>NetworkConfiguration</codeph> is automatically applied to the
							<codeph>MediaPlayerItemConfig</codeph> and used by <ph
							conkeyref="phrases/primetime-sdk-name"/>. </p>
				</info>
			</step> 
	 </steps> 
  </taskbody> 
</task> 
