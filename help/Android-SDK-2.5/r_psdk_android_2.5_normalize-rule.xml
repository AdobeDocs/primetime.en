<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE reference PUBLIC "-//OASIS//DTD DITA Reference//EN" "reference.dtd">
<reference id="reference_mgm_zcx_hz">
  <title>Normalize rules</title>
  <shortdesc>The normalize rule defines a URL transformation to apply to a source creative URL
    obtained from a VAST/VMAP response. </shortdesc>
  <prolog>
    <metadata>
      <keywords>
        <keyword>normalize rule</keyword>
        <keyword>creative selection rules</keyword>
      </keywords>
    </metadata>
  </prolog>
  <refbody>
    <table id="table_ljp_tgx_hz">
      <title>The normalize rule has the following attributes and possible values:</title>
      <tgroup cols="4">
        <thead>
          <row>
            <entry>Key</entry>
            <entry>Type</entry>
            <entry>Values</entry>
            <entry>Description</entry>
          </row>
        </thead>
        <tbody>
          <row>
            <entry><codeph>type</codeph></entry>
            <entry><codeph>String</codeph></entry>
            <entry><codeph>normalize</codeph></entry>
            <entry>The value must always be <codeph>normalize</codeph>.</entry>
          </row>
          <row>
            <entry><codeph>item</codeph></entry>
            <entry><codeph>String</codeph></entry>
            <entry><codeph>host</codeph></entry>
            <entry>Currently only <codeph>host</codeph> is supported. This attribute must be present
              when <codeph>matches</codeph> and <codeph>values</codeph> attributes are
              defined.</entry>
          </row>
          <row>
            <entry><codeph>matches</codeph></entry>
            <entry/>
            <entry/>
            <entry>Possible values:<ul id="ul_tnf_2hx_hz">
                <li><codeph>eq</codeph> - equals</li>
                <li><codeph>ne</codeph> - not equals</li>
                <li><codeph>co</codeph> - contains</li>
                <li><codeph>nc</codeph> - not contains</li>
                <li><codeph>sw</codeph> - starts with</li>
                <li><codeph>ew</codeph> - ends with</li>
              </ul></entry>
          </row>
          <row>
            <entry><codeph>values</codeph></entry>
            <entry><codeph>Array</codeph></entry>
            <entry/>
            <entry><ph conkeyref="phrases/primetime-sdk-name"/> will use the <codeph>matches</codeph> attribute on the
                <codeph>item</codeph> of the source creative and match against the values defined in
              this array.</entry>
          </row>
          <row>
            <entry><codeph>find</codeph></entry>
            <entry><codeph>regex</codeph></entry>
            <entry/>
            <entry>A regular expression to apply on the source creative URL to match.</entry>
          </row>
          <row>
            <entry><codeph>replace</codeph></entry>
            <entry><codeph>regex</codeph></entry>
            <entry/>
            <entry>A regular expression to apply on the source creative URL to replace based on the
              match.</entry>
          </row>
        </tbody>
      </tgroup>
    </table>
    <example>
      <codeblock outputclass="syntax json">{
    "ads": {
        "rules": {
            "default": [
                {
                ...
                }
                {
                    "<b>type</b>": "<b>normalize</b>",
                    "<b>item</b>": "host",
                    "<b>matches</b>": "ew",
                    "<b>values</b>": [
                        "redirector.gvt1.com"
                    ],
                    "<b>find</b>": "videoplayback/(.*?)/expire/.*?/(.*?)/signature/.*?/",
                    "<b>replace</b>": "videoplayback/$1/expire//$2/signature//"
                }                
            ]
        }
    }
}</codeblock>
    </example>
  </refbody>
</reference>
