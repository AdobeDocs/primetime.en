<?xml version="1.0"?>
<!DOCTYPE task PUBLIC "-//OASIS//DTD DITA Task//EN" "task.dtd">
<task id="task_include-vpaid"> 
  <title>Implement VPAID 2.0 integration</title> 
  <shortdesc>To add VPAID 2.0 support, add a custom ad view and appropriate
	 listeners. 
  </shortdesc> 
  <taskbody> 
	 <context id="context_E29F61F8271146958AF59326100A7527"> 
		<p>To add VPAID 2.0 support: 
		</p> 
	 </context> 
	 <steps id="steps_CCC1419235E54D84BD60D04203E862F2"> 
		<step id="step_00F245B26323441385266A37A8AAFB6C">
				<cmd>Add the custom ad view to the player interface when the player is in the
					PREPARED state. </cmd>
				<info>
					<codeblock outputclass="syntax java">...
private FrameLayout _playerFrame;
    ...
    case PREPARED:
        ...
        addCustomView();
...
private void addCustomView() {
    ...
    WebView view = (WebView)_mediaPlayer.getCustomAdView();
    ...
    _playerFrame.addView(view);</codeblock>
				</info>
			</step> 
		<step id="step_F3B8E5D6798647599A1E4DCB5CAE96F0">
				<cmd>Create listeners and process the events described in <xref
						keyref="event-listeners"/>. </cmd>
				<info>
					<note type="important">In a VPAID 2.0 workflow, for custom ad views it is very
						important to maintain your <codeph>CustomAdView</codeph> instance across
							<codeph>AdBreak</codeph> starts (event <codeph>AD_BREAK_START</codeph>)
						and <codeph>AdBreak</codeph> completes (event
							<codeph>AD_BREAK_COMPLETE</codeph>), from the time you create the custom
						ad view through to when you dispose of it. That is, do not create a custom
						ad view on every ad break start and dispose of it on every ad break
							complete.<p>In addition, you should only create your custom ad view when
							your player is in the PREPARED state, </p><p>Only dispose of the custom
							ad view when reset is called. For
							example:<codeblock>// on reset
if (_mediaPlayer != null) {
    _mediaPlayer.disposeCustomAdView();
    ...
}
</codeblock></p><p>Finally,
							before you dispose of your custom ad view, you must remove it from the
								<codeph>FrameLayout</codeph>. For
							example:<codeblock>if (_playerFrame != null)
    _playerFrame.removeAllViews();
</codeblock>.</p></note>
				</info>
			</step> 
	 </steps>
		<postreq id="postreq_n25_www_xz"/> 
  </taskbody> 
</task> 
